---
import Layout from "../layouts/Layout.astro";
import { getPageData } from "../lib/directus";
import BlocksToComponents from "../components/BlocksToComponents.tsx";

const { data, error } = await getPageData("/");

if (error) {
  console.error("Error fetching page data:", error);
  throw new Error("Failed to fetch page data");
}
---

<Layout seo={data?.seo}>
  <BlocksToComponents blocks={data?.blocks} client:load />
</Layout>
